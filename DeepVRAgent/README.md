# DeepVR Agent

Минималистичный агент для сбора базовых метрик системы: CPU, RAM, UUID и время.

## Архитектура

Агент работает как клиент SignalR: собирает метрики и отправляет их на удалённый сервер по адресу из `appsettings.json`. Собственного сервера/хаба агент не поднимает.

## Особенности

- ✅ **Без собственного порта** - агент только подключается к серверу
- ✅ **SignalR поддержка** - отправка метрик на сервер
- ✅ **Минимальный набор метрик** - только CPU, RAM, UUID, время
- ✅ **Автоматическое переподключение** - при разрыве связи с клиентом
- ✅ **Подробное логирование** - отслеживание всех операций
- ✅ **Обработка ошибок** - graceful fallback при сбоях

## Собираемые метрики

- **UUID** - уникальный идентификатор компьютера
- **CPU** - процент использования процессора
- **RAM** - процент использования памяти
- **Timestamp** - время сбора метрик

## Конфигурация

### appsettings.json
```json
{
  "HostServer": {
    "Host": "192.168.245.193",
    "Port": 5100
  }
}
```

## Отправка метрик

Агент автоматически подключается к серверному хабу `http://{Host}:{Port}/api/metrics-stream` и каждые 5 секунд вызывает метод `SendMetrics`, передавая текущие метрики.

## Запуск

```bash
dotnet run
```

## Структура проекта

```
DeepVRAgent/
├── Models/
│   └── DeepVRDTOs.cs            # DTO для метрик
├── Services/
│   ├── MetricsCollector.cs      # Сбор системных метрик (CPU, RAM, UUID, IP)
│   └── HubClientService.cs      # Клиент SignalR, отправка метрик
├── Program.cs                   # Точка входа (Generic Host)
└── appsettings.json             # Конфигурация
```

## Формат данных

### MetricsData
```json
{
  "UUID": "C2F8CA7C-B531-E411-AA1F-F0761C28D79B",
  "CPU": 56.17,
  "RAM": 51.80,
  "Timestamp": "2025-08-15T20:24:17.4066945Z"
}
```

### MetricsResponse
```json
{
  "Success": true,
  "Message": "Metrics updated",
  "Data": { ... }
}
```

## Логирование

Агент ведет подробные логи:
- Сбор метрик каждые 5 секунд
- Подключение/переподключение к серверу
- Ошибки и предупреждения
- Отправка данных
